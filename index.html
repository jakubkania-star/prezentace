<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ðŸ“¸ Foto prezentace</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <img src="https://1smiseny.skauting.cz/wp-content/uploads/2021/01/cropped-logo.png" alt="Logo">
    <h1>Foto Prezentace</h1>
  </header>

  <div class="slideshow">
    <img id="slide" src="" alt="Fotka" />
    <div id="info"></div>
  </div>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyr15YgyFvI01u_rk_C_c2opv_pJ0SoAqvnYWZ06viPrqskwizyyesYWzeWvOzihMTT/exec";
    let photos = [];
    let index = 0;
    let timer = null;
    const delay = 8000; // 8 sekund

    async function loadPhotos() {
      const res = await fetch(SCRIPT_URL);
      photos = await res.json();
      if (photos.length === 0) {
        document.getElementById("info").textContent = "Å½Ã¡dnÃ© fotky nenalezeny.";
        return;
      }
      showPhoto();
      timer = setInterval(nextPhoto, delay);
    }

    function showPhoto() {
      const p = photos[index];
      document.getElementById("slide").src = `https://drive.google.com/uc?export=view&id=${p.url.match(/[-\w]{25,}/)}`;
      document.getElementById("info").textContent = `${p.folder} â€” ${p.name} (${new Date(p.created).toLocaleDateString()})`;
    }

    function nextPhoto() {
      index = (index + 1) % photos.length;
      showPhoto();
    }

    loadPhotos();
  </script>
</body>
</html>
