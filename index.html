<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>üì∏ Foto prezentace</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <img src="https://1smiseny.skauting.cz/wp-content/uploads/2021/01/cropped-logo.png" alt="Logo">
    <h1>Foto Prezentace</h1>
  </header>

  <div class="slideshow">
    <img id="slide" src="" alt="Fotka" />
    <div id="info"></div>
  </div>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw9YuZrN4FjWkpxi89GsO351u0t32ADvJCd6Z9FHNdxnLyHDkuwcFFHfzM-3BtvDGQ-/exec";
    let photos = [];
    let index = 0;
    let timer = null;
    const delay = 8000; // ƒças mezi fotkami v ms (8s)

    async function loadPhotos() {
      try {
        const res = await fetch(SCRIPT_URL);
        photos = await res.json();
        console.log("Naƒçten√© fotky:", photos);

        if (!photos || photos.length === 0) {
          document.getElementById("info").textContent = "≈Ω√°dn√© fotky nenalezeny.";
          return;
        }

        showPhoto();
        timer = setInterval(nextPhoto, delay);

      } catch (err) {
        console.error("Chyba p≈ôi naƒç√≠t√°n√≠ fotek:", err);
        document.getElementById("info").textContent = "Nepoda≈ôilo se naƒç√≠st fotky.";
      }
    }

    function showPhoto() {
      const p = photos[index];
      document.getElementById("slide").src = p.url;
      document.getElementById("info").textContent = `${p.folder} ‚Äî ${p.name} (${new Date(p.created).toLocaleDateString()})`;
    }

    function nextPhoto() {
      index = (index + 1) % photos.length;
      showPhoto();
    }

    loadPhotos();
  </script>
</body>
</html>
